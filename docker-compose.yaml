version: '3.1'

services:
    db:
        image: mysql
        ports:
            - 3306:3306
        volumes:
            - ./database_data:/var/lib/mysql
        environment:
            - MYSQL_ROOT_PASSWORD=password
            - MYSQL_DATABASE=maplestory
    adminer:
        image: adminer
        ports:
            - 8080:8080
    elasticsearch:
        image: docker.elastic.co/elasticsearch/elasticsearch:6.2.2
        container_name: elasticsearch
        environment:
        - cluster.name=docker-cluster
        - bootstrap.memory_lock=true
        - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
        ulimits:
        memlock:
            soft: -1
            hard: -1
        volumes:
        - ./elastic_data:/usr/share/elasticsearch/data
        ports:
        - 9200:9200
    kibana:
        image: docker.elastic.co/kibana/kibana:6.2.2
        environment:
        SERVER_NAME: kibana.example.org
        ELASTICSEARCH_URL: elasticsearch